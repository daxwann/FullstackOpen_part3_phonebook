(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(13),c=t.n(a),i=(t(20),t(2)),u=t(3),s=t.n(u),l="/api/persons/",f=function(){return s.a.get(l).then((function(e){return e.data}))},m=function(e){return s.a.post(l,e).then((function(e){return e.data}))},p=function(e){return s.a.delete(l+e)},d=function(e,n){return s.a.put(l+e,n).then((function(e){return e.data}))},h=t(14);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var y=function(e){var n=Object(r.useState)(""),t=Object(i.a)(n,2),a=t[0],c=t[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),l=s[0],f=s[1],p=function(n){if(window.confirm("".concat(n.name," already exist in the phonebook. Do you want to replace the old number with the new one?"))){var t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(t,!0).forEach((function(n){Object(h.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},n,{number:l});d(n.id,t).then((function(t){e.setPersons(e.persons.map((function(e){return e.id!==n.id?e:t}))),e.notify("success","".concat(t.name,"'s number has been updated")),c(""),f("")})).catch((function(n){e.notify("error","".concat(t.name," has already been deleted"))}))}};return o.a.createElement("form",{onSubmit:function(n){n.preventDefault();var t,r=(t=a,e.persons.find((function(e){return e.name===t})));r?p(r):m({name:a,number:l}).then((function(n){e.setPersons(e.persons.concat(n)),e.notify("success","".concat(n.name,"'s number has been added")),c(""),f("")})).catch((function(n){e.notify("error","".concat(n.response.data.error))}))}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:a,onChange:e.handleInput(c)})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:l,onChange:e.handleInput(f)})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},v=function(e){return o.a.createElement("form",null,o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.searchTerm,onChange:e.handleFilterInput})))},E=function(e){return o.a.createElement("div",null,e.person.name," ",e.person.number," ",e.person.id," ",o.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(e.person.name,"?"))&&e.deletePerson(e.person.id,e.person.name)}},"delete"))},O=function(e){return o.a.createElement("div",null,function(){var n=new RegExp(e.searchTerm,"i"),t=e.persons.filter((function(e){return e.name.match(n)})),r=function(n,t){p(n).then((function(r){e.setPersons(e.persons.filter((function(e){return e.id!==n}))),e.notify("success","Deleted ".concat(t))})).catch((function(n){e.notify("error","Failed to delete ".concat(t))}))};return t.map((function(e){return o.a.createElement(E,{key:e.id,person:e,deletePerson:r})}))}())},w=function(e){var n=e.notification;return""===n.type?null:o.a.createElement("div",{className:"notification notification--".concat(n.type)},n.message)},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],l=u[1],m=Object(r.useState)({type:"",message:""}),p=Object(i.a)(m,2),d=p[0],h=p[1],b=function(e,n){return function(n){e(n.target.value)}},E=function(e,n){h({type:e,message:n}),setTimeout((function(){h({type:"",message:""})}),5e3)};return Object(r.useEffect)((function(){f().then((function(e){a(e)})).catch((function(e){E("error","failed to retrieve all entries")}))}),[]),o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{notification:d}),o.a.createElement(v,{searchTerm:s,handleFilterInput:b(l)}),o.a.createElement("h2",null,"Add New"),o.a.createElement(y,{persons:t,setPersons:a,handleInput:b,notify:E}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(O,{persons:t,setPersons:a,searchTerm:s,notify:E}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.f74d25fc.chunk.js.map